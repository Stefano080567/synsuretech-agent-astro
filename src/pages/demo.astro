---
import Layout from "../layouts/Layout.astro";
---

<Layout title="WikiSure Agent Demo">
  <main style="padding: 48px; max-width: 720px; margin: 0 auto; font-family: system-ui;">
    <h1 style="font-size: 32px; margin-bottom: 8px;">
      WikiSure Agent Demo
    </h1>

    <p style="margin-bottom: 24px; color: #555;">
      Click the button below to start the semantic agent.
    </p>

    <button
      id="start-agent"
      style="
        padding: 12px 20px;
        border-radius: 8px;
        border: none;
        background: #0047ff;
        color: white;
        font-size: 16px;
        cursor: pointer;
      "
    >
      Start Agent
    </button>

    <pre
      id="agent-result"
      style="
        margin-top: 24px;
        padding: 16px;
        background: #f4f6fa;
        border-radius: 8px;
        min-height: 60px;
        font-size: 14px;
      "
    ></pre>
  </main>

  <script>
    const btn = document.getElementById("start-agent");
    const out = document.getElementById("agent-result");

    btn.addEventListener("click", async () => {
      out.textContent = "Running agent...";

      try {
        const res = await fetch("/api/agent", {
          method: "POST",
          headers: {
            "Content-Type": "application/json"
          },
          body: JSON.stringify({ agent: "draft" })
        });

        const text = await res.text();
        out.textContent = text;
      } catch (err) {
        out.textContent = "Error calling agent API";
      }
    });
  </script>
</Layout>
